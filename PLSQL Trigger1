#To create the table Employee
CREATE TABLE Employee (
    emp_id       NUMBER(5) PRIMARY KEY,
    emp_name     VARCHAR2(50),
    salary       NUMBER(10,2),
    designation  VARCHAR2(30)
);

#To create the table Salary_Backup
CREATE TABLE Salary_Backup (
    emp_id            NUMBER(5),
    old_salary        NUMBER(10,2),
    new_salary        NUMBER(10,2),
    salary_difference NUMBER(10,2)
);

step1-------
CREATE OR REPLACE TRIGGER trg_salary_backup
AFTER UPDATE OF salary ON Employee
FOR EACH ROW
BEGIN
    INSERT INTO Salary_Backup (emp_id, old_salary, new_salary, salary_difference)
    VALUES (
        :OLD.emp_id,
        :OLD.salary,
        :NEW.salary,
        (:NEW.salary - :OLD.salary)
    );
END;
/
#----TEST CASE 1-----
UPDATE Employee
SET salary = 80000
WHERE emp_id = 101;

SELECT * FROM Salary_Backup;


step2-------
CREATE OR REPLACE TRIGGER trg_no_delete_ceo
BEFORE DELETE ON Employee
FOR EACH ROW
BEGIN
    IF UPPER(:OLD.designation) = 'CEO' THEN
        RAISE_APPLICATION_ERROR(-20002, 'Error: Cannot delete CEO record!');
    END IF;
END;
/
#----TEST CASE 2-----
DELETE FROM Employee WHERE emp_id = 103;


